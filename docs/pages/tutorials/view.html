<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>ardUI Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="/img/ardUI_logo.svg"><link rel="stylesheet" href="/style/stylify.css"><link rel="stylesheet" href="/style/style.css"></head><body><header><a class="mr-3" href="/"><img id="logo" src="/img/ardUI_text.svg" alt="ardUI logo"></a></header><main><div id="tab-layout"><div class="tab" id="nav-tab"><h3 class="tab-title">Navigation</h3><div id="nav-container"><h5>Installation</h5><a href="/pages/tutorials/installation">Installation</a><a href="/pages/tutorials/display_interface">Display interface</a><h5>Basic information</h5><a href="/pages/tutorials/quickstart">Getting started</a><a href="/pages/tutorials/view_tree">View tree</a><a href="/pages/tutorials/activity">Activity basics</a><a href="/pages/tutorials/view">View basics</a><h5>Extending ardUI</h5><a href="/pages/tutorials/custom_views">Custom views</a><h5>Advanced concepts</h5><a href="/pages/tutorials/porting">Porting guide</a></div></div><article id="content-tab"><h1 data-anchor="View basics">View basics</h1><p> A View is a single widget you can place on your screen. As mentioned before in
 <a href="/pages/tutorials/view_tree">view tree article</a>, a single Activity can store an unlimited number
 of Views by making use of different Layouts. Let's take a look at one of the most important ardUI concepts.</p><h2 data-anchor="Pointers and memory">Pointers and memory management</h2><p> From the previous examples you may have noticed that the Views in ardUI are usually handled by their pointers.
 This is intentional and it is important to understand why it's done. Consider this example:</p><pre><div class="code-line"><span class="highlight comment">// Warning, legacy code ahead!</span></div><div class="code-line"><span class="highlight comment">// This code WILL NOT work in the latest version of ardUI.</span></div><div class="code-line"></div><div class="code-line"><span class="highlight keyword">class</span> MyActivity: <span class="highlight modifier">public</span> Activity {</div><div class="code-line">  <span class="highlight typename">void</span> <span class="highlight function">onCreate</span>() <span class="highlight keyword">override</span> {</div><div class="code-line">    <span class="highlight typename">auto</span> ll = <span class="highlight function">LinearLayout</span>();</div><div class="code-line">    <span class="highlight typename">auto</span> t = <span class="highlight function">TextView</span>(<span class="highlight string">"Activity title"</span>);</div><div class="code-line"></div><div class="code-line">    <span class="highlight function">setRootView</span>(ll);</div><div class="code-line">    ll.<span class="highlight function">addView</span>(t);</div><div class="code-line">  }</div><div class="code-line">};</div></pre><p> On the first look, this might look better than the current solution but there is a major problem with it.
 The issue is that C++ passes arguments by copy. This means that line 10 would have had no effect since
 a copy of the Layout with no widgets was already added to an Activity on line 9. Because of this
 some objects in ardUI are handled using their pointers for best flexibility so that you can do things
 in any order you like. If you are not very familiar
 with pointers, all you need to know is that you should use a <code>new</code> keyword when creating Views and
 use an arrow (<code>-></code>) operator instead of a dot (<code>.</code>) to access View's methods and fields.</p><p> This, however, raises an issue of memory management since all memory allocated should be freed at some point.
 ardUI handles that automatically for you by explicitly deleting everything it's aware of once it is no
 longer needed. In other words, it will delete all Views added to a view tree once their containing Activity
 is closed. However, you are still responsible for deleting everything not added to the view tree or any other
 objects ardUI cannot handle.</p><h2 data-anchor="Event callbacks">Event functions and callbacks</h2><p> If you have ever tried to make user interfaces yourself, you might agree that the one of the
 most annoying things is constantly monitoring touchscreen input to make your buttons work as expected.
 ardUI simplifies things here as well. It constantly checks your touchscreen and when an action (a click,
 long click, scroll, etc.) has been detected it will call a function that you have specified (a callback).
 Here is a simple example of setting a callback on a button:</p><pre><div class="code-line"><span class="highlight keyword">class</span> MainActivity: <span class="highlight modifier">public</span> Activity {</div><div class="code-line">  <span class="highlight keyword">using</span> <span class="highlight scope">Activity::</span>Activity;</div><div class="code-line"></div><div class="code-line">  <span class="highlight typename">void</span> <span class="highlight function">onCreate</span>() <span class="highlight keyword">override</span> {</div><div class="code-line">    <span class="highlight typename">auto</span> b = <span class="highlight keyword">new</span> <span class="highlight function">ButtonView</span>(<span class="highlight string">"Hello world!"</span>);</div><div class="code-line">    <span class="highlight function">setRootView</span>(b);</div><div class="code-line"></div><div class="code-line">    b-&gt;<span class="highlight function">setOnClickListener</span>([](View* b) -&gt; <span class="highlight typename">void</span> {</div><div class="code-line">      Serial.<span class="highlight function">println</span>(<span class="highlight string">"Your button was clicked!"</span>);</div><div class="code-line">    });</div><div class="code-line">  }</div><div class="code-line">};</div></pre><p> When ardUI detects that your button has been clicked in this example, it will call your callback (lines 13-15)
 for you. Please note that none of the callbacks in ardUI are closures, meaning they cannot use or modify
 any variables outside them. You can think of these as normal functions receiving predefined arguments:</p><pre><div class="code-line"><span class="highlight typename">int</span> i = <span class="highlight number">0</span>;</div><div class="code-line">b-&gt;<span class="highlight function">setOnClickListener</span>([](View* b) -&gt; <span class="highlight typename">void</span> {</div><div class="code-line">  ++i;  <span class="highlight comment">// This will not work</span></div><div class="code-line">});</div></pre><p> To make working with Views somewhat easier, ardUI provides two functions: <code>ardUI::setViewName()</code> and
 <code>ardUI::getViewByName()</code>. If you need to access another View in your callback, you can first save your
 View and then get it by name like this:</p><pre><div class="code-line"><span class="highlight typename">auto</span> t = <span class="highlight keyword">new</span> <span class="highlight function">TextView</span>(<span class="highlight string">"Hello"</span>);</div><div class="code-line"><span class="highlight typename">auto</span> b = <span class="highlight keyword">new</span> <span class="highlight function">ButtonView</span>(<span class="highlight string">"Press me!"</span>);</div><div class="code-line"></div><div class="code-line"><span class="highlight scope">ardUI::</span><span class="highlight function">setViewName</span>(t, <span class="highlight string">"text"</span>);</div><div class="code-line"></div><div class="code-line">b-&gt;<span class="highlight function">setOnClickListener</span>([](View* b) -&gt; <span class="highlight typename">void</span> {</div><div class="code-line">  <span class="highlight typename">auto</span> t = (TextView*)<span class="highlight scope">ardUI::</span><span class="highlight function">getViewByName</span>(<span class="highlight string">"text"</span>);</div><div class="code-line">  t-&gt;<span class="highlight function">setText</span>(<span class="highlight string">"Pressed!"</span>);</div><div class="code-line">});</div></pre><p> Notice the type casting on line 7. This function will return a pointer to a View object so you may need to
 cast it down to the appropriate type to use fields and methods specific to that widget, like
 <code>setText()</code> in this example.</p><script async src="/js/referencer.js"></script></article><div class="tab" id="toc-tab"><h3 class="tab-title">On this page</h3><div id="toc-container"></div><script async src="/js/toc.js"></script></div></div></main><footer><span>Developed by <a href="https://github.com/MStefan99/ardUI/graphs/contributors">ardUI contributors</a></span><span>Idea by <a href="https://mstefan99.com/">Mikhail Stefantsev</a></span><span>Contribute to ardUI on <a href="https://github.com/MStefan99/ardUI">GitHub</a>!</span></footer></body></html>